{"version":3,"file":"monaco-jsx-highlighter.js","sources":["../../node_modules/style-inject/dist/style-inject.es.js","../../src/MonacoJSXHighlighter.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import './MonacoJSXHighlighter.css';\n\nlet monaco = null, parse = null, traverse = null;\n\nconst defaultOptions = {\n   parser: 'babel',\n   isHighlightGlyph: false,\n   iShowHover: false,\n   isUseSeparateElementStyles: false,\n   isThrowJSXParseErrors: false,\n};\n\nexport const configureLocToMonacoRange = (\n   _monaco = monaco, parserType = 'babel'\n) => {\n   switch (parserType) {\n      case 'babel':\n      default:\n         return (\n            loc,\n            startLineOffset = 0,\n            startColumnOffset = 0,\n            endLineOffset = 0,\n            endColumnOffset = 0,\n         ) => {\n            if (!loc || !loc.start) {\n               return new _monaco.Range(\n                  1,\n                  1,\n                  1,\n                  1\n               );\n            }\n            return new _monaco.Range(\n               startLineOffset + loc.start.line,\n               startColumnOffset + loc.start.column + 1,\n               endLineOffset + loc.end ?\n                  loc.end.line\n                  : loc.start.line,\n               endColumnOffset + loc.end ?\n                  loc.end.column + 1\n                  : loc.start.column + 1,\n            );\n         };\n   }\n};\n\nexport function makeJSXTraverse() {\n   const jsxExpressions = [];\n   const jsxTraverse = (path) => {\n      if (path.type.toUpperCase().includes(\"JSX\")) {\n         jsxExpressions.push(path);\n      }\n   };\n   \n   const find = (type) => {\n      return jsxExpressions.filter(p => p.type === type);\n   }\n   \n   const findJSXElements = () => find('JSXElement');\n   \n   return {\n      jsxExpressions,\n      find,\n      findJSXElements,\n      jsxTraverse\n   };\n}\n\nfunction _jsxTraverseAst(ast, _traverse = traverse) {\n   const jsxManager = makeJSXTraverse();\n   _traverse(ast, {enter: jsxManager.jsxTraverse});\n   return jsxManager;\n}\n\nexport function prepareOptions(\n   path,\n   jsxTypeOptions = {},\n   highlighterOptions = {}\n) {\n   return highlighterOptions.iShowHover ?\n      {...jsxTypeOptions, ...{hoverMessage: `(${path.type})`}}\n      : jsxTypeOptions;\n}\n\nexport const HIGHLIGHT_TYPE = {\n   ELEMENT: 'ELEMENT', // jsx elements\n   ALL: 'ALL', // the whole node's location, e.g. identifier names\n   IDENTIFIER: 'IDENTIFIER', // JSX identifiers\n   EDGE: 'EDGE', // only the  starting and ending characters in node's\n   // location e.g. spread child or attribute, container expressions\n   STYLE: 'STYLE', // for styling only, not used by node locations\n};\n\nexport const HIGHLIGHT_MODE = {\n   [HIGHLIGHT_TYPE.ELEMENT]: (\n      path,\n      jsxTypeOptions,\n      decorators = [],\n      highlighterOptions,\n      locToMonacoRange,\n   ) => {\n      const loc = path.node.loc;\n      const openingElement = path.node.openingElement;\n      let elementName = null;\n      if (openingElement) {\n         elementName = openingElement.name.name;\n         \n         const startLoc = {\n            start: {...openingElement.loc.start},\n            end: {...openingElement.name.loc.start}\n         };\n         \n         const endLoc = {\n            start: {...openingElement.loc.end},\n            end: {...openingElement.loc.end}\n         };\n         endLoc.start.column--;\n         \n         if (openingElement.selfClosing) {\n            endLoc.start.column--;\n         }\n         \n         decorators.push({\n            range: locToMonacoRange(startLoc),\n            options: highlighterOptions.isUseSeparateElementStyles ?\n               JSXTypes.JSXBracket.openingElementOptions\n               : JSXTypes.JSXBracket.options,\n         });\n         \n         decorators.push({\n            range: locToMonacoRange(endLoc),\n            options: highlighterOptions.isUseSeparateElementStyles ?\n               JSXTypes.JSXBracket.openingElementOptions\n               : JSXTypes.JSXBracket.options,\n         });\n      }\n      \n      const closingElement = path.node.closingElement;\n      if (closingElement) {\n         const startLoc = {\n            start: {...closingElement.loc.start},\n            end: {...closingElement.name.loc.start}\n         };\n         \n         const endLoc = {\n            start: {...closingElement.loc.end},\n            end: {...closingElement.loc.end}\n         };\n         endLoc.start.column--;\n         \n         decorators.push({\n            range: locToMonacoRange(startLoc),\n            options: highlighterOptions.isUseSeparateElementStyles ?\n               JSXTypes.JSXBracket.closingElementOptions\n               : JSXTypes.JSXBracket.options,\n         });\n         decorators.push({\n            range: locToMonacoRange(endLoc),\n            options: highlighterOptions.isUseSeparateElementStyles ?\n               JSXTypes.JSXBracket.closingElementOptions\n               : JSXTypes.JSXBracket.options,\n         });\n      }\n      \n      highlighterOptions.isHighlightGlyph && decorators.push({\n         range: locToMonacoRange(loc),\n         options: JSXTypes.JSXElement.options(elementName),\n      });\n   },\n   [HIGHLIGHT_TYPE.ALL]: (\n      path,\n      jsxTypeOptions,\n      decorators = [],\n      highlighterOptions,\n      locToMonacoRange,\n   ) => {\n      const loc = {\n         start: {...path.node.loc.start},\n         end: {...path.node.loc.end}\n      };\n      \n      if (path.key === 'object') {\n         loc.end = {...path.container.property.loc.start};\n      }\n      locToMonacoRange && decorators.push({\n         range: locToMonacoRange(loc),\n         options: prepareOptions(path, jsxTypeOptions, highlighterOptions)\n      });\n      return decorators;\n   },\n   [HIGHLIGHT_TYPE.IDENTIFIER]: (\n      path,\n      jsxTypeOptions = {},\n      decorators = [],\n      highlighterOptions = {},\n      locToMonacoRange,\n   ) => {\n      \n      if (\n         path.key === 'object' ||\n         path.key === 'property' ||\n         path.key === 'name' ||\n         path.key === 'namespace'\n      ) {\n         HIGHLIGHT_MODE[HIGHLIGHT_TYPE.ALL](\n            path,\n            path.parentPath && path.parentPath.isJSXAttribute() ?\n               JSXTypes.JSXAttribute.options : jsxTypeOptions,\n            decorators,\n            highlighterOptions,\n            locToMonacoRange,\n         );\n      }\n      return decorators;\n   },\n   [HIGHLIGHT_TYPE.EDGE]: (\n      path,\n      jsxTypeOptions,\n      decorators = [],\n      highlighterOptions,\n      locToMonacoRange,\n   ) => {\n      const options = prepareOptions(path, jsxTypeOptions, highlighterOptions);\n      \n      const loc = path.node.loc;\n      let innerLocKey =\n         path.isJSXSpreadChild() ? 'expression'\n            : path.isJSXSpreadAttribute() ? 'argument' : null;\n      \n      let innerLoc = null;\n      \n      if (innerLocKey) {\n         const innerNode = path.node[innerLocKey];\n         innerLoc = {\n            start: {...innerNode.loc.start},\n            end: {...innerNode.loc.end}\n         };\n         if (innerNode.extra && innerNode.extra.parenthesized) {\n            innerLoc.start.column--;\n            innerLoc.end.column++;\n         }\n      } else {\n         innerLoc = {start: {...loc.start}, end: {...loc.end}};\n         innerLoc.start.column++;\n         innerLoc.end.column--;\n      }\n      \n      const startEdgeLoc = {start: {...loc.start}, end: {...innerLoc.start}};\n      \n      const endEdgeLoc = {start: {...innerLoc.end}, end: {...loc.end}};\n      \n      decorators.push({\n         range: locToMonacoRange(startEdgeLoc),\n         options\n      });\n      decorators.push({\n         range: locToMonacoRange(endEdgeLoc),\n         options\n      });\n      \n      return decorators;\n   },\n   [HIGHLIGHT_TYPE.STYLE]: () => [], // noop\n};\n\nexport const JSXTypes = {\n   JSXIdentifier: {\n      highlightScope: HIGHLIGHT_TYPE.IDENTIFIER,\n      options: {\n         inlineClassName: 'JSXElement.JSXIdentifier',\n      },\n   },\n   JSXOpeningFragment: {\n      highlightScope: HIGHLIGHT_TYPE.ALL,\n      options: {\n         inlineClassName: 'JSXOpeningFragment.JSXBracket',\n      },\n   },\n   JSXClosingFragment: {\n      highlightScope: HIGHLIGHT_TYPE.ALL,\n      options: {\n         inlineClassName: 'JSXClosingFragment.JSXBracket',\n      },\n   },\n   JSXText: {\n      highlightScope: HIGHLIGHT_TYPE.ALL,\n      options: {\n         inlineClassName: 'JSXElement.JSXText',\n      },\n   },\n   JSXExpressionContainer: {\n      highlightScope: HIGHLIGHT_TYPE.EDGE,\n      options: {\n         inlineClassName: 'JSXExpressionContainer.JSXBracket',\n      },\n   },\n   JSXSpreadChild: {\n      highlightScope: HIGHLIGHT_TYPE.EDGE,\n      options: {\n         inlineClassName: 'JSXSpreadChild.JSXBracket',\n      },\n   },\n   JSXSpreadAttribute: {\n      highlightScope: HIGHLIGHT_TYPE.EDGE,\n      options: {\n         inlineClassName: 'JSXSpreadAttribute.JSXBracket',\n      },\n   },\n   JSXElement: {\n      highlightScope: HIGHLIGHT_TYPE.STYLE,\n      options: (elementName) => (\n         {\n            glyphMarginClassName: 'JSXElement.JSXGlyph',\n            glyphMarginHoverMessage:\n               `JSX Element${elementName ? ': ' + elementName : ''}`\n         }\n      ),\n   },\n   JSXBracket: {\n      highlightScope: HIGHLIGHT_TYPE.STYLE,\n      options: {\n         inlineClassName: 'JSXElement.JSXBracket',\n      },\n      openingElementOptions: {\n         inlineClassName: 'JSXOpeningElement.JSXBracket',\n      },\n      closingElementOptions: {\n         inlineClassName: 'JSXClosingElement.JSXBracket',\n      },\n   },\n   JSXOpeningElement: {\n      highlightScope: HIGHLIGHT_TYPE.STYLE,\n      options: {\n         inlineClassName: 'JSXOpeningElement.JSXIdentifier',\n      },\n   },\n   JSXClosingElement: {\n      highlightScope: HIGHLIGHT_TYPE.STYLE,\n      options: {\n         inlineClassName: 'JSXClosingElement.JSXIdentifier',\n      },\n   },\n   JSXAttribute: {\n      highlightScope: HIGHLIGHT_TYPE.STYLE,\n      options: {\n         inlineClassName: 'JSXAttribute.JSXIdentifier',\n      },\n   },\n};\n\nexport const JSXCommentContexts = {\n   JS: 'JS',\n   JSX: 'JSX'\n}\n\nexport const COMMENT_ACTION_ID = \"editor.action.commentLine\";\n\nclass MonacoJSXHighlighter {\n   constructor(\n      monacoRef,\n      parseRef,\n      traverseRef,\n      monacoEditor,\n      options = {},\n   ) {\n      this.resetState = this.resetState.bind(this);\n      this.resetDeltaDecorations = this.resetDeltaDecorations.bind(this);\n      this.getAstPromise = this.getAstPromise.bind(this);\n      this.highLightOnDidChangeModelContent =\n         this.highLightOnDidChangeModelContent.bind(this);\n      this.highlightCode = this.highlightCode.bind(this);\n      this.highlight = this.highlight.bind(this);\n      this.createDecoratorsByType = this.createDecoratorsByType.bind(this);\n      this.createJSXElementDecorators =\n         this.createJSXElementDecorators.bind(this);\n      this.extractAllDecorators = this.extractAllDecorators.bind(this);\n      this.getJSXContext = this.getJSXContext.bind(this);\n      this.runJSXCommentContextAndAction =\n         this.runJSXCommentContextAndAction.bind(this);\n      this.addJSXCommentCommand = this.addJSXCommentCommand.bind(this);\n      \n      this._isHighlightBoundToModelContentChanges = false;\n      this._isJSXCommentCommandActive = false;\n      monaco = monacoRef;\n      parse = parseRef;\n      traverse = traverseRef;\n      this.options = {...defaultOptions, ...options};\n      const {parserType} = this.options;\n      this.locToMonacoRange = configureLocToMonacoRange(monaco, parserType);\n      this.monacoEditor = monacoEditor;\n      this.resetState();\n   }\n   \n   resetState() {\n      this.prevEditorValue = null;\n      this.editorValue = null;\n      this.ast = null;\n      this.jsxManager = null;\n   }\n   \n   resetDeltaDecorations() {\n      this.JSXDecoratorIds = (this.monacoEditor &&\n         this.monacoEditor.deltaDecorations(\n            this.JSXDecoratorIds || [],\n            []\n         )\n      );\n   }\n   \n   getAstPromise(forceUpdate) {\n      return new Promise((resolve) => {\n         if (\n            forceUpdate ||\n            !this.editorValue ||\n            this.editorValue !== this.prevEditorValue\n         ) {\n            this.prevEditorValue = this.editorValue;\n            this.editorValue = this.monacoEditor.getValue();\n            try {\n               this.ast = parse(this.editorValue);\n            } catch (e) {\n               if (\n                  e instanceof SyntaxError &&\n                  !e.message.includes('JSX')\n               ) {\n                  this.resetState();\n                  throw e;\n               } else {\n                  if (this.options.isThrowJSXParseErrors) {\n                     throw e;\n                  } else {\n                     resolve(this.ast);\n                  }\n               }\n            }\n         }\n         resolve(this.ast);\n      });\n   }\n   \n   highLightOnDidChangeModelContent(\n      debounceTime = 100,\n      afterHighlight = ast => ast,\n      onHighlightError = error => console.error(error),\n      getAstPromise,\n      onParseAstError = error => console.log(error),\n   ) {\n      getAstPromise = getAstPromise || this.getAstPromise;\n      const highlightCallback = () => {\n         this.highlightCode(\n            afterHighlight,\n            onHighlightError,\n            getAstPromise,\n            onParseAstError\n         );\n      };\n      \n      highlightCallback();\n      \n      let tid = null;\n      \n      let highlighterDisposer = {\n         onDidChangeModelContentDisposer:\n            this.monacoEditor.onDidChangeModelContent(\n               () => {\n                  clearTimeout(tid);\n                  setTimeout(\n                     highlightCallback,\n                     debounceTime\n                  );\n               }),\n         onDidChangeModelDisposer: this.monacoEditor.onDidChangeModel(\n            () => {\n               highlightCallback();\n            })\n      };\n      \n      highlighterDisposer.dispose = () => {\n         highlighterDisposer.onDidChangeModelContentDisposer.dispose();\n         highlighterDisposer.onDidChangeModelDisposer.dispose();\n      };\n      \n      this._isHighlightBoundToModelContentChanges = true;\n      \n      const onDispose = () => {\n         this.resetState();\n         this.resetDeltaDecorations();\n         if (\n            !this._isHighlightBoundToModelContentChanges\n         ) {\n            return;\n         }\n         this._isHighlightBoundToModelContentChanges = false;\n         highlighterDisposer && highlighterDisposer.dispose();\n         highlighterDisposer = null;\n         \n      }\n      \n      this.monacoEditor.onDidDispose(() => {\n         this.resetDeltaDecorations();\n         highlighterDisposer = null;\n         this._isHighlightBoundToModelContentChanges = false;\n      });\n      return onDispose;\n   }\n   \n   highlightCode(\n      afterHighlight = ast => ast,\n      onError = error => console.error(error),\n      getAstPromise,\n      onJsParserErrors = error => error,\n   ) {\n      getAstPromise = getAstPromise || this.getAstPromise;\n      return (\n         getAstPromise()\n            .then(ast => this.highlight(ast))\n            .catch(onJsParserErrors)\n      )\n         .then(afterHighlight)\n         .catch(onError);\n   }\n   \n   highlight(ast, jsxTraverseAst = _jsxTraverseAst) {\n      return new Promise((resolve) => {\n         if (ast) {\n            this.jsxManager = jsxTraverseAst(ast);\n            this.decorators = this.extractAllDecorators(this.jsxManager);\n         }\n         resolve(ast);\n      });\n   }\n   \n   createDecoratorsByType(\n      jsxManager,\n      jsxType,\n      jsxTypeOptions,\n      highlightScope,\n      decorators = [],\n      highlighterOptions,\n      locToMonacoRange,\n   ) {\n      highlighterOptions = highlighterOptions || this.options;\n      locToMonacoRange = locToMonacoRange || this.locToMonacoRange;\n      jsxManager && jsxManager.find(jsxType)\n         .forEach(path => HIGHLIGHT_MODE[highlightScope](\n            path,\n            jsxTypeOptions,\n            decorators,\n            highlighterOptions,\n            locToMonacoRange\n            )\n         );\n      \n      return decorators;\n   }\n   \n   createJSXElementDecorators(\n      jsxManager,\n      decorators = [],\n      highlighterOptions,\n      locToMonacoRange\n   ) {\n      highlighterOptions = highlighterOptions || this.options;\n      locToMonacoRange = locToMonacoRange || this.locToMonacoRange;\n      jsxManager && jsxManager\n         .findJSXElements()\n         .forEach(path => HIGHLIGHT_MODE.ELEMENT(\n            path,\n            null,\n            decorators,\n            highlighterOptions,\n            locToMonacoRange\n         ));\n      return decorators;\n   }\n   \n   extractAllDecorators(jsxManager) {\n      jsxManager = jsxManager || this.jsxManager;\n      const decorators = this.createJSXElementDecorators(jsxManager);\n      for (const jsxType in JSXTypes) {\n         this.createDecoratorsByType(\n            jsxManager,\n            jsxType,\n            JSXTypes[jsxType].options,\n            JSXTypes[jsxType].highlightScope,\n            decorators,\n         );\n      }\n      \n      this.JSXDecoratorIds =\n         this.monacoEditor.deltaDecorations(\n            this.JSXDecoratorIds || [],\n            decorators\n         );\n      return decorators;\n   }\n   \n   getJSXContext(\n      selection,\n      ast,\n      monacoEditor,\n      locToMonacoRange\n   ) {\n      monacoEditor = monacoEditor || this.monacoEditor;\n      locToMonacoRange = locToMonacoRange || this.locToMonacoRange;\n      let jsxManager = ast ? this.jsxManager : null;\n      if (!this._isHighlightBoundToModelContentChanges) {\n         jsxManager = ast ? _jsxTraverseAst(ast) : null;\n      }\n      \n      if (!jsxManager) {\n         return JSXCommentContexts.JS;\n      }\n      \n      let startColumn =\n         monacoEditor.getModel().getLineFirstNonWhitespaceColumn(\n            selection.startLineNumber\n         );\n      \n      const commentableRange = new monaco.Range(\n         selection.startLineNumber,\n         startColumn,\n         selection.startLineNumber,\n         startColumn,\n      );\n      \n      startColumn = startColumn ? startColumn - 1 : 0;\n      const containingRange = new monaco.Range(\n         selection.startLineNumber,\n         startColumn,\n         selection.startLineNumber,\n         startColumn,\n      );\n      \n      \n      let minRange = null;\n      let minCommentableRange = null;\n      let path = null;\n      let commentablePath = null;\n      \n      jsxManager.jsxExpressions.forEach(p => {\n         const jsxRange = locToMonacoRange(p.node.loc);\n         if ((p.key === 'name' || p.key === 'property') &&\n            p.isJSXIdentifier() &&\n            jsxRange.intersectRanges(commentableRange)) {\n            if (\n               !minCommentableRange ||\n               minCommentableRange.containsRange(jsxRange)\n            ) {\n               minCommentableRange = jsxRange;\n               commentablePath = p;\n            }\n         }\n         if (jsxRange.intersectRanges(containingRange)) {\n            if (!minRange || minRange.containsRange(jsxRange)) {\n               minRange = jsxRange;\n               path = p;\n            }\n         }\n      });\n      \n      if (!path || path.isJSXExpressionContainer() || commentablePath) {\n         return JSXCommentContexts.JS;\n      } else {\n         return JSXCommentContexts.JSX;\n      }\n   }\n   \n   runJSXCommentContextAndAction(\n      selection,\n      getAstPromise,\n      onJsCodeShiftErrors = error => error,\n      editor,\n      runJsxCommentAction\n   ) {\n      getAstPromise = getAstPromise || this.getAstPromise;\n      editor = editor || this.monacoEditor;\n      \n      return new Promise((resolve) => {\n            if (this._isHighlightBoundToModelContentChanges) {\n               resolve(\n                  runJsxCommentAction(\n                     this.getJSXContext(selection, this.ast, editor)\n                  )\n               );\n            } else {\n               getAstPromise().then(ast => {\n                     resolve(\n                        runJsxCommentAction(\n                           this.getJSXContext(selection, ast, editor)\n                        )\n                     );\n                  })\n                  .catch(\n                     (error) => resolve(\n                        runJsxCommentAction(\n                           this.getJSXContext(selection, null, editor)\n                        )\n                     ) || onJsCodeShiftErrors(error)\n                  )\n            }\n         }\n      ).catch(error => (\n            runJsxCommentAction(\n               this.getJSXContext(selection, null, editor))\n            || onJsCodeShiftErrors(error)\n         )\n      );\n   }\n   \n   addJSXCommentCommand(\n      getAstPromise,\n      onJsCodeShiftErrors = error => error,\n      editor\n   ) {\n      getAstPromise = getAstPromise || this.getAstPromise;\n      editor = editor || this.monacoEditor;\n      \n      if (this._editorCommandId) {\n         this._isJSXCommentCommandActive = true;\n         return this.editorCommandOnDispose;\n      }\n      \n      this._editorCommandId = editor.addCommand(\n         monaco.KeyMod.CtrlCmd | monaco.KeyCode.US_SLASH,\n         () => {\n            if (!this._isJSXCommentCommandActive) {\n               editor.getAction(COMMENT_ACTION_ID).run();\n               return;\n            }\n            const selection = editor.getSelection();\n            const model = editor.getModel();\n            \n            const jsCommentRange = new monaco.Range(\n               selection.startLineNumber,\n               model.getLineFirstNonWhitespaceColumn(selection.startLineNumber),\n               selection.startLineNumber,\n               model.getLineMaxColumn(selection.startLineNumber),\n            );\n            const jsCommentText = model.getValueInRange(jsCommentRange);\n            \n            if (jsCommentText.match(/^\\s*\\/[/*]/)) {\n               editor.getAction(COMMENT_ACTION_ID).run();\n               this.resetState();\n               return;\n            }\n            \n            const runJsxCommentAction = (commentContext) => {\n               \n               let isUnCommentAction = true;\n               const commentsData = [];\n               \n               for (let i = selection.startLineNumber;\n                    i <= selection.endLineNumber;\n                    i++) {\n                  const commentRange = new monaco.Range(\n                     i,\n                     model.getLineFirstNonWhitespaceColumn(i),\n                     i,\n                     model.getLineMaxColumn(i),\n                  );\n                  \n                  const commentText = model.getValueInRange(commentRange);\n                  \n                  commentsData.push({\n                     commentRange,\n                     commentText\n                  });\n                  \n                  isUnCommentAction = isUnCommentAction &&\n                     !!commentText.match(/{\\/\\*/);\n               }\n               \n               \n               if (commentContext !== JSXCommentContexts.JSX\n                  && !isUnCommentAction) {\n                  editor.getAction(COMMENT_ACTION_ID).run();\n                  this.resetState();\n                  return;\n               }\n               \n               let editOperations = [];\n               let commentsDataIndex = 0;\n               \n               for (let i = selection.startLineNumber;\n                    i <= selection.endLineNumber;\n                    i++) {\n                  let {\n                     commentText,\n                     commentRange,\n                  } = commentsData[commentsDataIndex++];\n                  \n                  if (isUnCommentAction) {\n                     commentText = commentText.replace(/{\\/\\*/, '');\n                     commentText = commentText.replace(/\\*\\/}/, '');\n                  } else {\n                     commentText = `{/*${commentText}*/}`;\n                  }\n                  \n                  editOperations.push({\n                     identifier: {major: 1, minor: 1},\n                     range: commentRange,\n                     text: commentText,\n                     forceMoveMarkers: true,\n                  });\n               }\n               editOperations.length &&\n               editor.executeEdits(this._editorCommandId, editOperations);\n            };\n            \n            this.runJSXCommentContextAndAction(\n               selection,\n               getAstPromise,\n               onJsCodeShiftErrors,\n               editor,\n               runJsxCommentAction\n            ).catch(onJsCodeShiftErrors);\n         });\n      \n      this.editorCommandOnDispose = () => {\n         this._isJSXCommentCommandActive = false;\n      };\n      \n      this._isJSXCommentCommandActive = true;\n      \n      editor.onDidDispose(this.editorCommandOnDispose);\n      \n      return this.editorCommandOnDispose;\n   }\n}\n\nexport default MonacoJSXHighlighter;\n"],"names":["styleInject","css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","monaco","parse","traverse","defaultOptions","parser","isHighlightGlyph","iShowHover","isUseSeparateElementStyles","isThrowJSXParseErrors","configureLocToMonacoRange","_monaco","parserType","loc","startLineOffset","startColumnOffset","endLineOffset","endColumnOffset","start","Range","line","column","end","makeJSXTraverse","jsxExpressions","jsxTraverse","path","toUpperCase","includes","push","find","filter","p","findJSXElements","_jsxTraverseAst","ast","_traverse","jsxManager","enter","prepareOptions","jsxTypeOptions","highlighterOptions","hoverMessage","HIGHLIGHT_TYPE","ELEMENT","ALL","IDENTIFIER","EDGE","STYLE","HIGHLIGHT_MODE","decorators","locToMonacoRange","node","openingElement","elementName","name","startLoc","endLoc","selfClosing","range","options","JSXTypes","JSXBracket","openingElementOptions","closingElement","closingElementOptions","JSXElement","key","container","property","parentPath","isJSXAttribute","JSXAttribute","innerLocKey","isJSXSpreadChild","isJSXSpreadAttribute","innerLoc","innerNode","extra","parenthesized","startEdgeLoc","endEdgeLoc","JSXIdentifier","highlightScope","inlineClassName","JSXOpeningFragment","JSXClosingFragment","JSXText","JSXExpressionContainer","JSXSpreadChild","JSXSpreadAttribute","glyphMarginClassName","glyphMarginHoverMessage","JSXOpeningElement","JSXClosingElement","JSXCommentContexts","JS","JSX","COMMENT_ACTION_ID","MonacoJSXHighlighter","constructor","monacoRef","parseRef","traverseRef","monacoEditor","resetState","bind","resetDeltaDecorations","getAstPromise","highLightOnDidChangeModelContent","highlightCode","highlight","createDecoratorsByType","createJSXElementDecorators","extractAllDecorators","getJSXContext","runJSXCommentContextAndAction","addJSXCommentCommand","_isHighlightBoundToModelContentChanges","_isJSXCommentCommandActive","prevEditorValue","editorValue","JSXDecoratorIds","deltaDecorations","forceUpdate","Promise","resolve","getValue","e","SyntaxError","message","debounceTime","afterHighlight","onHighlightError","error","console","onParseAstError","log","highlightCallback","tid","highlighterDisposer","onDidChangeModelContentDisposer","onDidChangeModelContent","clearTimeout","setTimeout","onDidChangeModelDisposer","onDidChangeModel","dispose","onDispose","onDidDispose","onError","onJsParserErrors","then","catch","jsxTraverseAst","jsxType","forEach","selection","startColumn","getModel","getLineFirstNonWhitespaceColumn","startLineNumber","commentableRange","containingRange","minRange","minCommentableRange","commentablePath","jsxRange","isJSXIdentifier","intersectRanges","containsRange","isJSXExpressionContainer","onJsCodeShiftErrors","editor","runJsxCommentAction","_editorCommandId","editorCommandOnDispose","addCommand","KeyMod","CtrlCmd","KeyCode","US_SLASH","getAction","run","getSelection","model","jsCommentRange","getLineMaxColumn","jsCommentText","getValueInRange","match","commentContext","isUnCommentAction","commentsData","i","endLineNumber","commentRange","commentText","editOperations","commentsDataIndex","replace","identifier","major","minor","text","forceMoveMarkers","length","executeEdits"],"mappings":"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"}